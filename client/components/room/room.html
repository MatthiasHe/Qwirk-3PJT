<div class="chat-area">
  <div class="title"><b>Conversation id = {{roomCtrl.roomId}}</b><i class="fa fa-search"></i></div>
  <!--<div class="chat-list">-->
  <!--<ul>-->
  <!--<li class="me">-->
  <!--<div class="name">-->
  <!--<span class="">Cucu Ionel</span>-->
  <!--</div>-->
  <!--<div class="message">-->
  <!--<p>Hey, do you like the new interface? It's done with Font Awesome.</p>-->
  <!--<span class="msg-time">5:00 pm</span>-->
  <!--</div>-->
  <!--</li>-->
  <!--<li class="">-->
  <!--<div class="name">-->
  <!--<span class="">Christian Smith</span>-->
  <!--</div>-->
  <!--<div class="message">-->
  <!--<p><span class="blue-label">Cucu Ionel</span> I see what you did there.</p>-->
  <!--<span class="msg-time">5:01 pm</span>-->
  <!--</div>-->
  <!--</li>-->
  <!--<li class="me">-->
  <!--<div class="name">-->
  <!--<span class="">Cucu Ionel</span>-->
  <!--</div>-->
  <!--<div class="message">-->
  <!--<p>Feel free to look at the code if you want.</p>-->
  <!--<span class="msg-time">5:02 pm</span>-->
  <!--</div>-->
  <!--</li>-->
  <!--<li class="">-->
  <!--<div class="name">-->
  <!--<span class="">Christian Smith</span>-->
  <!--</div>-->
  <!--<div class="message">-->
  <!--<p>Yeah, will do.</p>-->
  <!--<span class="msg-time">5:04 pm</span>-->
  <!--</div>-->
  <!--</li>-->
  <!--<li class="me">-->
  <!--<div class="name">-->
  <!--<span class="">Cucu Ionel</span>-->
  <!--</div>-->
  <!--<div class="message">-->
  <!--<p>This is an example text reply.</p>-->
  <!--<span class="msg-time">5:04 pm</span>-->
  <!--</div>-->
  <!--</li>-->
  <!--<li class="">-->
  <!--<div class="name">-->
  <!--<span class="">Christian Smith</span>-->
  <!--</div>-->
  <!--<div class="message">-->
  <!--<p>I know, put some more.</p>-->
  <!--<span class="msg-time">5:06 pm</span>-->
  <!--</div>-->
  <!--</li>-->
  <!--<li class="me">-->
  <!--<div class="name">-->
  <!--<span class="">Cucu Ionel</span>-->
  <!--</div>-->
  <!--<div class="message">-->
  <!--<p>Here is another line.</p>-->
  <!--<span class="msg-time">5:06 pm</span>-->
  <!--</div>-->
  <!--</li>-->
  <!--<li class="">-->
  <!--<div class="name">-->
  <!--<span class="">Christian Smith</span>-->
  <!--</div>-->
  <!--<div class="message">-->
  <!--<p>Yeah, will do.</p>-->
  <!--<span class="msg-time">5:04 pm</span>-->
  <!--</div>-->
  <!--</li>-->
  <!--<li class="me">-->
  <!--<div class="name">-->
  <!--<span class="">Cucu Ionel</span>-->
  <!--</div>-->
  <!--<div class="message">-->
  <!--<p>Feel free to look at the code if you want.</p>-->
  <!--<span class="msg-time">5:02 pm</span>-->
  <!--</div>-->
  <!--</li>-->
  <!--<li class="">-->
  <!--<div class="name">-->
  <!--<span class="">Christian Smith</span>-->
  <!--</div>-->
  <!--<div class="message">-->
  <!--<p>Yeah, will do.</p>-->
  <!--<span class="msg-time">5:04 pm</span>-->
  <!--</div>-->
  <!--</li>-->
  <!--<li class="me">-->
  <!--<div class="name">-->
  <!--<span class="">Cucu Ionel</span>-->
  <!--</div>-->
  <!--<div class="message">-->
  <!--<p>Feel free to look at the code if you want.</p>-->
  <!--<span class="msg-time">5:02 pm</span>-->
  <!--</div>-->
  <!--</li>-->
  <!--<li class="">-->
  <!--<div class="name">-->
  <!--<span class="">Christian Smith</span>-->
  <!--</div>-->
  <!--<div class="message">-->
  <!--<p>Yeah, will do.</p>-->
  <!--<span class="msg-time">5:04 pm</span>-->
  <!--</div>-->
  <!--</li>-->
  <!--</ul>-->
  <!--</div>-->
  <!--<div class="input-area">-->
  <!--<div class="input-wrapper">-->
  <!--<input type="text" value="">-->
  <!--<i class="fa fa-smile-o"></i>-->
  <!--<i class="fa fa-paperclip"></i>-->
  <!--</div>-->
  <!--<input type="button" value="Submit" class="send-btn">-->
  <!--</div>-->
</div>

<div class="container">
  <div class="row " style="padding-top:40px;">
    <h3 class="text-center">Qwirk ðŸ˜´</h3>
    <btn ng-if="roomCtrl.isParticipant && !roomCtrl.isPrivate" class="btn-danger btn" ng-click="roomCtrl.leaveRoom()">Quitter la room</btn>
    <i class="emoticon emoticon-smile" title=":smile:"></i>
    <br><br>
    <div class="col-md-8">
      <div class="panel panel-info">
        <div class="panel-heading">
        </div>
        <div class="media text-center" ng-if="!roomCtrl.messages.length">Envoyez un premier message dans cette conversation !</div>
        <div class="panel-body" ng-repeat="message in roomCtrl.messages">
          <ul class="media-list">
            <li class="media">
              <div class="media-body">
                <div class="media">
                  <a class="pull-left" href="#"> <img class="media-object img-circle " src="assets/img/user.png"/> </a>
                  <div class="media-body">
                    <div ng-if="!message.editOn">
                      <ng-embed embed-data="message.text" embed-options="roomCtrl.options"></ng-embed>
                      <button ng-if="roomCtrl.canManage || roomCtrl.isAdmin" class="btn btn-default" ng-click="roomCtrl.editMessage(message)"></button>
                    </div>
                    <form ng-if="message.editOn" ng-submit="roomCtrl.sendTextForEdit(message)">
                      <div class="panel-footer">
                        <div class="input-group">
                          <input type="text" class="form-control" placeholder="Enter Message or drag a file" ng-model="roomCtrl.messageEdit" autocomplete="off" required/>
                          <span class="input-group-btn">
                            <button class="btn btn-info" type="button">Validate</button>
                          </span>
                        </div>
                      </div>
                    </form>
                    <small class="text-muted">{{message.author}} | {{message.date | date:'dd-MM-yyyy HH:mm:ss'}}</small>
                    <hr/>
                  </div>
                </div>
              </div>
            </li>
          </ul>
        </div>


        <div ng-if="roomCtrl.isParticipant"ngf-drop ngf-select ng-model="roomCtrl.file" class="drop-box" id="file"
             ngf-drag-over-class="'dragover'" ngf-multiple="false" ngf-allow-dir="true"
             accept="image/*,application/pdf" ngf-change="roomCtrl.sendFile()"
             ngf-pattern="'image/*,application/pdf'" ngf-select-disabled="true"
             ngf-resize="{width: 100, height: 100, quality: 1, type: 'image/jpeg',
               ratio: '1:2', pattern='.jpg', restoreExif: false}" ngf-max-size="10MB">
          <form ng-submit="roomCtrl.sendMessage()">
            <div class="panel-footer">
              <div class="input-group">
                <input type="text" class="form-control" placeholder="Enter Message or drag a file" ng-model="roomCtrl.message" autocomplete="off" required/>
                <span class="input-group-btn">
                    <button class="btn btn-info" type="button">SEND</button>
                  </span>
              </div>
            </div>
          </form>
        </div>

        <div ng-if="!roomCtrl.isParticipant">
          <span class="input-group-btn">
            <button ng-click="roomCtrl.joinRoom()" class="btn btn-info" type="button">REJOINDRE LA ROOM</button>
          </span>
        </div>

      </div>
    </div>
    <div class="col-md-4">
      <div class="panel panel-primary">
        <div class="panel-heading">
          PARTICIPANTS
        </div>
        <div class="panel-body" ng-repeat="participant in roomCtrl.users">
          <ul class="media-list">
            <li class="media">
              <div class="media-body">
                <div class="media">
                  <a class="pull-left" href="#">
                    <img class="media-object img-circle" style="max-height:40px;" src="{{participant.avatar}}"/> </a>
                  <div class="media-body">
                    <h5>{{participant.name}}</h5>
                    <small class="text-muted">Active From 3 hours</small>
                    <button ng-if="roomCtrl.isAdmin && !roomCtrl.moderators.includes(participant._id)" ng-click="roomCtrl.giveModeratorRights(participant._id)"class="btn btn-default">Right</button>
                    <button ng-if="roomCtrl.isAdmin && roomCtrl.moderators.includes(participant._id)" ng-click="roomCtrl.removeModeratorRights(participant._id)"class="btn btn-default">Remove</button>
                  </div>
                </div>
              </div>
            </li>
          </ul>
        </div>

        <div ng-if="!roomCtrl.isPrivate && roomCtrl.isParticipant">
          <button class="btn btn-info center-block" type="button">Add a member</button>

          <div>
            <h2 class="text-center">Amis</h2>
            <div class="panel-body" ng-repeat="friend in roomCtrl.friends">
              <ul class="media-list">
                <li class="media">
                  <div class="media-body">
                    <div class="media">
                      <a class="pull-left" href="#">
                        <img class="media-object img-circle" style="max-height:40px;" src="assets/img/user.png"/> </a>
                      <button class="btn btn-info center-block" type="button" ng-click="roomCtrl.addMember(friend._id, $index)">Ajouter {{friend.name}}</button>
                    </div>
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
